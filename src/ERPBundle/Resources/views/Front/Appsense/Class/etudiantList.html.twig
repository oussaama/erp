{% extends 'baseFront.html.twig' %}
{% block title %}Enseignant - Absences{% endblock %}
{% block stylesheets %}
    <script type="text/javascript">
        //<![CDATA[
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-92643213-2']);
        _gaq.push(['_trackPageview']);
        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
        (function (b) {
            (function (a) {
                "__CF" in b && "DJS" in b.__CF ? b.__CF.DJS.push(a) : "addEventListener" in b ? b.addEventListener("load", a, !1) : b.attachEvent("onload", a)
            })(function () {
                "FB" in b && "Event" in FB && "subscribe" in FB.Event && (FB.Event.subscribe("edge.create", function (a) {
                    _gaq.push(["_trackSocial", "facebook", "like", a])
                }), FB.Event.subscribe("edge.remove", function (a) {
                    _gaq.push(["_trackSocial", "facebook", "unlike", a])
                }), FB.Event.subscribe("message.send", function (a) {
                    _gaq.push(["_trackSocial", "facebook", "send", a])
                }));
                "twttr" in b && "events" in twttr && "bind" in twttr.events && twttr.events.bind("tweet", function (a) {
                    if (a) {
                        var b;
                        if (a.target && a.target.nodeName == "IFRAME")a:{
                            if (a = a.target.src) {
                                a = a.split("#")[0].match(/[^?=&]+=([^&]*)?/g);
                                b = 0;
                                for (var c; c = a[b]; ++b)if (c.indexOf("url") === 0) {
                                    b = unescape(c.split("=")[1]);
                                    break a
                                }
                            }
                            b = void 0
                        }
                        _gaq.push(["_trackSocial", "twitter", "tweet", b])
                    }
                })
            })
        })(window);//]]>
    </script>
    <script type="text/javascript">
        //<![CDATA[
        try {
            if (!window.CloudFlare) {
                var CloudFlare = [{
                    verbose: 0,
                    p: 0,
                    byc: 0,
                    owlid: "cf",
                    bag2: 1,
                    mirage2: 0,
                    oracle: 0,
                    paths: {cloudflare: "/cdn-cgi/nexp/dok3v=1613a3a185/"},
                    atok: "82f71ab91e52e9dc6f8d10c6ee544add",
                    petok: "07d9b5c669a4fa4a06776c98721e4d32cea870c5-1497805119-1800",
                    zone: "themesadmin.com",
                    rocket: "0",
                    apps: {"ga_key": {"ua": "UA-92643213-2", "ga_bs": "2"}}
                }];
                !function (a, b) {
                    a = document.createElement("script"), b = document.getElementsByTagName("script")[0], a.async = !0, a.src = "../../ajax.cloudflare.com/cdn-cgi/nexp/dok3v%3d85b614c0f6/cloudflare.min.js", b.parentNode.insertBefore(a, b)
                }()
            }
        } catch (e) {

        }
        ;
        //]]>
    </script>
    <link rel="stylesheet" href="{{ asset('assets/global/plugins/Waves/dist/waves.min.css') }}"/>
    <link rel="stylesheet" href="{{ asset('assets/global/plugins/bootstrap/dist/css/bootstrap.min.css') }}"/>
    <link rel="stylesheet" href="{{ asset('assets/icons_fonts/elegant_font/elegant.min.css') }}"/>
    <link id="site-color" rel="stylesheet"
          href="{{ asset('assets/layouts/layout-material-menu/css/color/light/color-default.css') }}"/>
    <link rel="stylesheet" href="{{ asset('assets/global/plugins/switchery/dist/switchery.min.css') }}"/>
    <link rel="stylesheet" href="{{ asset('assets/global/plugins/perfect-scrollbar/css/perfect-scrollbar.min.css') }}"/>
    <link rel="stylesheet" href="{{ asset('assets/global/plugins/css-hamburgers/dist/hamburgers.min.css') }}"/>
    <link rel="stylesheet" href="{{ asset('assets/global/plugins/font-awesome/css/font-awesome.min.css') }}"/>
    <link rel="stylesheet" href="{{ asset('assets/global/plugins/morris.js/morris.min.css') }}"/>
    <link rel="stylesheet" href="{{ asset('assets/global/plugins/flatpickr/dist/flatpickr.min.css') }}"/>
    <link rel="stylesheet" href="{{ asset('assets/global/plugins/jsgrid/dist/jsgrid.min.css') }}"/>
    <link rel="stylesheet" href="{{ asset('assets/global/plugins/jsgrid/dist/jsgrid-theme.min.css') }}"/>
    <link rel="stylesheet"
          href="{{ asset('assets/global/plugins/datatables-responsive/css/responsive.bootstrap4.min.css') }}"/>
    <link rel="stylesheet" href="{{ asset('assets/global/css/components.min.css') }}"/>
    <link rel="stylesheet" href="{{ asset('assets/layouts/layout-left-icon-menu/css/layout.min.css') }}"/>
    <link rel="stylesheet" href="{{ asset('assets/layouts/layout-icon-menu/css/layout.min.css') }}"/>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.7.1/css/bootstrap-datepicker3.standalone.min.css">
    <style>

        .menu-paiment:hover {
            background: #087380 !important;
        }

        .input-form {
            margin-top: 10px;
        }

        .datepicker-switch {
            color: #087380;
        }

        .next, .prev {
            color: #087310;
        }
    </style>
{% endblock %}
{% block secondMenu %}
    <div id="header-icon">
        <div class="header-width">
            <div class="col-xl-12">
                <div class="menucontainer">
                    <div class="overlapblackbg"></div>
                    <a id="navtoggle" class="animated-arrow"><span></span></a>
                    <nav id="nav" class="topmenu" role="navigation">
                        <ul class="menu-list live-search-list">
                            <li style="background:#087380;">
                                <a href="{{ path('cour_index') }}">
                                    <span class="icon fa fa-list header-icon" aria-hidden="true"
                                          style="color: #fff;"></span>
                                    <span style="color:white">Cours</span>
                                </a>
                            </li>
                            <li class="menu-paiment">
                                <a href="{{ path('appsense_index') }}">
                                    <span class="icon fa fa-table header-icon" aria-hidden="true"></span>
                                    <span>Absences</span>
                                </a>
                            </li>
                            <li class="menu-paiment">
                                <a href="{{ path('examen_index') }}">
                                    <span class="icon fa fa-check-square-o header-icon" aria-hidden="true"></span>
                                    <span>Examens</span>
                                </a>
                            </li>
                            <li class="menu-paiment">
                                <a href="{{ path('note_index') }}">
                                    <span class="icon fa fa-check-square-o header-icon" aria-hidden="true"></span>
                                    <span>Notes</span>
                                </a>
                            </li>
                            <li class="menu-paiment">
                                <a href="{{ path('appsense_index') }}">
                                    <span class="icon fa fa-group header-icon" aria-hidden="true"></span>
                                    <span>Classe</span>
                                </a>
                            </li>
                        </ul>
                    </nav>

                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block body %}


    <section id="content-wrapper" class="form-elements">

        <div class="site-content-title">
            <ol class="breadcrumb float-xs-right">
                <li class="breadcrumb-item">
                    <span class="fs1" aria-hidden="true" data-icon=""></span>
                    <a href="#">Home</a>
                </li>
                <li class="breadcrumb-item"><a href="#">Absences</a></li>
                <li class="breadcrumb-item active"> index</li>
            </ol>
        </div>
        <div class="contain-inner dashboard-v2">
            <div class="col-md-12">
                <div class="row">
                    <div class="content">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="basic_table table-responsive">
                                    <form action="{{path('absent_add',{'classe':id}) }}" method="post">
                                    <table class="table">
                                        <thead>
                                        <tr>
                                            <th>Nom et Prenom</th>
                                            <th>TP</th>
                                            <th>TD</th>
                                            <th>Cours</th>
                                            <th>Etat</th>
                                            <th>Date</th>
                                        </tr>
                                        </thead>
                                        {% for e in etudiant %}
                                            <tbody>
                                                <td>{{ e.nom }} {{ e.prenom }}</td>
                                                <td>
                                                    <div class="checkbox-squared">
                                                        <input value="None" id="tp{{ e.id }}" name="tp{{ e.id }}"
                                                               type="checkbox">
                                                        <label for="tp{{ e.id }}"></label>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="checkbox-squared">
                                                        <input value="None" id="td{{ e.id }}" name="td{{ e.id }}"
                                                               type="checkbox">
                                                        <label for="td{{ e.id }}"></label>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="checkbox-squared">
                                                        <input value="None" id="co{{ e.id }}" name="co{{ e.id }}"
                                                               type="checkbox">
                                                        <label for="co{{ e.id }}"></label>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="radio-inline">
                                                        <div class="radio-button">
                                                            <input value="None" id="r1{{ e.id }}" name="r1{{ e.id }}"
                                                                   type="radio">
                                                            <label for="r1{{ e.id }}"></label>
                                                            <span>Present</span>
                                                        </div>
                                                        <div class="radio-button">
                                                            <input value="None" id="r2{{ e.id }}" name="r2{{ e.id }}"
                                                                   type="radio">
                                                            <label for="r2{{ e.id }}"></label>
                                                            <span>Retard</span>
                                                        </div>
                                                        <div class="radio-button">
                                                            <input value="None" id="r3{{ e.id }}" name="r3{{ e.id }}" type="radio">
                                                            <label for="r3{{ e.id }}"></label>
                                                            <span>Absent</span>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>

                                                    <div class="form-group">
                                                        <div class="input-group date" data-plugin="flatpickr"
                                                             data-enable-time="true" data-wrap="true">
                                                            <input type="text" class="form-control flatpickr-input" data-input="" id="date{{ e.id }}" name="date{{ e.id }}">
                                                            <span class="input-group-addon date-icon" data-toggle=""><i class="icon icon_calendar"></i></span>
                                                        </div>
                                                    </div>
                                                </td>
                                                <input type="hidden" value="{{ app.user.id }}" name="id"/>
                                            </tbody>
                                        {% endfor %}
                                    </table>
                                        <button type="submit" class="btn btn-xs btn-primary pull-right">Enregistrer</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}
{% block scripts %}
    <script type="text/javascript" src="{{ asset('assets/global/plugins/jquery/dist/jquery.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('assets/global/plugins/tether/dist/js/tether.min.js') }}"></script>
    <script type="text/javascript"
            src="{{ asset('assets/global/plugins/bootstrap/dist/js/bootstrap.min.js') }}"></script>
    <script type="text/javascript"
            src="{{ asset('assets/global/plugins/perfect-scrollbar/js/perfect-scrollbar.jquery.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('assets/global/plugins/switchery/dist/switchery.min.js') }}"></script>
    <script type="text/javascript"
            src="{{ asset('assets/global/plugins/screenfull.js/dist/screenfull.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('assets/global/plugins/Waves/dist/waves.min.js') }}"></script>
    <script src="{{ asset('assets/global/plugins/classie/classie.js') }}"></script>
    <script type="text/javascript" src="{{ asset('assets/global/plugins/raphael/raphael.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('assets/global/plugins/morris.js/morris.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('assets/global/plugins/moment/min/moment.min.js') }}"></script>
    <script type="text/javascript"
            src="{{ asset('assets/global/plugins/owl.carousel/dist/owl.carousel.min.js') }}"></script>
    <script type="text/javascript"
            src="{{ asset('assets/global/plugins/jquery-mousewheel/jquery.mousewheel.min.js') }}"></script>
    <script type="text/javascript"
            src="{{ asset('assets/global/plugins/arcseldon-jquery.sparkline/dist/jquery.sparkline.js') }}"></script>
    <script type="text/javascript" src="{{ asset('assets/global/plugins/flatpickr/dist/flatpickr.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('assets/global/js/site.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('assets/global/js/site-settings.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('assets/global/js/global/dashboard_v4.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('assets/layouts/layout-left-icon-menu/js/layout.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('assets/global/js/global/form_mask.js') }}"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.7.1/js/bootstrap-datepicker.js"></script>
    <script>

        $('.datepicker').datepicker({
            format: 'mm/dd/yyyy h:i',
            startDate: '-3d'
        });
        $('.desactivt').click(function () {
            id = $(this).data('id');
            $('.desactiv').click(function () {
                $.ajax({
                    url: Routing.generate('admin_delete_compte', {'id': id}),
                    success: function (result) {
                        console.log(result);
                        window.location.href = "http://localhost/erp/web/app_dev.php/admin/employee";
                    },
                    failed: function (a) {
                        console.log(a);
                    }
                });
            });
        });
    </script>
    <script type="text/javascript">
        $('.edit-Appsense').click(function () {
            id = $(this).data('id');
            $.ajax({
                type: 'POST',
                url: Routing.generate('appsense_edit', {'id': id}),
                success: function () {
                    $('#update-appsense-form').html('<img src="{{ asset('loader.gif') }}" />');
                },
                complete: function (data) {
                    $('#update-appsense-form').html(data.responseText)
                }
            });
        });
    </script>
{% endblock %}
